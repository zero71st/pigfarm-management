@using Microsoft.AspNetCore.Components
@using MudBlazor
@using PigFarmManagement.Shared.Models

<MudDialog>
    <DialogContent>
        <MudContainer Style="max-width: 500px;">
            <MudGrid>
                <MudItem xs="12">
                    <div class="d-flex align-center mb-4">
                        <MudIcon Icon="@Icons.Material.Filled.Warning" 
                                 Color="Color.Warning" 
                                 Size="Size.Large" 
                                 Class="mr-3" />
                        <MudText Typo="Typo.h6">
                            ยืนยันการลบบันทึกการจับสุกร
                        </MudText>
                    </div>
                </MudItem>
                
                <MudItem xs="12">
                    <MudAlert Severity="Severity.Warning">
                        <MudText>คุณแน่ใจหรือไม่ว่าต้องการลบบันทึกการจับสุกรนี้? การกระทำนี้ไม่สามารถย้อนกลับได้</MudText>
                    </MudAlert>
                </MudItem>
                
                <MudItem xs="12">
                    <MudPaper Class="pa-4" Elevation="1">
                        <MudText Typo="Typo.subtitle1" Class="mb-2">
                            <strong>รายละเอียดการจับสุกร:</strong>
                        </MudText>
                        <MudGrid>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">วันที่:</MudText>
                                <MudText Typo="Typo.body1">@HarvestToDelete.HarvestDate.ToString("dd/MM/yyyy")</MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">จำนวนสุกรที่ขาย:</MudText>
                                <MudText Typo="Typo.body1">
                                    <strong>@HarvestToDelete.PigCount ตัว</strong>
                                </MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">น้ำหนักเฉลี่ย:</MudText>
                                <MudText Typo="Typo.body1">@HarvestToDelete.AvgWeight.ToString("N1") กก.</MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">น้ำหนักรวม:</MudText>
                                <MudText Typo="Typo.body1">@HarvestToDelete.TotalWeight.ToString("N1") กก.</MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">ราคาต่อกก.:</MudText>
                                <MudText Typo="Typo.body1">฿@HarvestToDelete.SalePricePerKg.ToString("N2")</MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">ยอดรวมรายได้:</MudText>
                                <MudText Typo="Typo.body1" Color="Color.Success">
                                    <strong>฿@HarvestToDelete.Revenue.ToString("N2")</strong>
                                </MudText>
                            </MudItem>
                        </MudGrid>
                    </MudPaper>
                </MudItem>
                
                <MudItem xs="12">
                    <MudAlert Severity="Severity.Error" Dense="true">
                        <MudText Typo="Typo.body2">
                            <strong>⚠️ คำเตือน:</strong> การลบบันทึกการจับสุกรจะมีผลต่อการคำนวณรายได้ของคอกสุกรและอาจส่งผลต่อรายงานทางการเงิน
                        </MudText>
                    </MudAlert>
                </MudItem>
            </MudGrid>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" 
                   Variant="Variant.Text">
            ยกเลิก
        </MudButton>
        <MudButton Color="Color.Error" 
                   Variant="Variant.Filled" 
                   OnClick="Confirm"
                   StartIcon="@Icons.Material.Filled.Delete">
            ลบบันทึกการจับสุกร
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }
    [Parameter] public HarvestResult HarvestToDelete { get; set; } = new HarvestResult(Guid.Empty, Guid.Empty, DateTime.Today, 0, 0, 0, 0, 0);

    void Cancel() => MudDialog?.Cancel();

    void Confirm() => MudDialog?.Close(DialogResult.Ok(true));
}