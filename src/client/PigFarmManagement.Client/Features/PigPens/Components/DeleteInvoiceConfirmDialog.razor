@using Microsoft.AspNetCore.Components
@using MudBlazor

<MudDialog>
    <DialogContent>
        <MudContainer Style="max-width: 500px;">
            <MudGrid>
                <MudItem xs="12">
                    <div class="d-flex align-center mb-4">
                        <MudIcon Icon="Icons.Material.Filled.Warning" 
                                 Color="Color.Warning" 
                                 Size="Size.Large" 
                                 Class="mr-3" />
                        <MudText Typo="Typo.h6">
                            ยืนยันการลบใบแจ้งหนี้
                        </MudText>
                    </div>
                </MudItem>
                
                <MudItem xs="12">
                    <MudAlert Severity="Severity.Warning">
                        <MudText>การดำเนินการนี้ไม่สามารถย้อนกลับได้</MudText>
                        <MudText Typo="Typo.body2" Class="mt-2">
                            ระบบจะลบรายการอาหารทั้งหมดที่เกี่ยวข้องกับใบแจ้งหนี้นี้
                        </MudText>
                    </MudAlert>
                </MudItem>
                
                <MudItem xs="12">
                    <MudPaper Class="pa-4" Elevation="1">
                        <MudText Typo="Typo.subtitle1" Class="mb-2">
                            <strong>รายละเอียดบิลขาย:</strong>
                        </MudText>
                        <MudGrid>
                            <MudItem xs="12">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">รหัสอ้างอิง:</MudText>
                                <MudText Typo="Typo.body1">
                                    <strong>@InvoiceReferenceCode</strong>
                                </MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">จำนวนรายการ:</MudText>
                                <MudText Typo="Typo.body1" Color="Color.Info">
                                    <strong>@ItemCount รายการ</strong>
                                </MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">ยอดรวม:</MudText>
                                <MudText Typo="Typo.body1" Color="Color.Success">
                                    <strong>฿@TotalAmount.ToString("N2")</strong>
                                </MudText>
                            </MudItem>
                        </MudGrid>
                    </MudPaper>
                </MudItem>
            </MudGrid>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" 
                   Variant="Variant.Text">
            ยกเลิก
        </MudButton>
        <MudButton Color="Color.Error" 
                   Variant="Variant.Filled" 
                   OnClick="Confirm"
                   StartIcon="Icons.Material.Filled.Delete">
            ลบบิลขาย
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; } = null!;
    
    [Parameter] public string InvoiceReferenceCode { get; set; } = "";
    [Parameter] public decimal TotalAmount { get; set; }
    [Parameter] public int ItemCount { get; set; }

    void Cancel() => MudDialog.Cancel();

    void Confirm() => MudDialog.Close(DialogResult.Ok(true));
}
