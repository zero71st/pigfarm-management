@using Microsoft.AspNetCore.Components
@using MudBlazor
@using PigFarmManagement.Shared.Models

<MudDialog>
    <DialogContent>
        <MudContainer Style="max-width: 500px;">
            <MudGrid>
                <MudItem xs="12">
                    <div class="d-flex align-center mb-4">
                        <MudIcon Icon="Icons.Material.Filled.Warning" 
                                 Color="Color.Warning" 
                                 Size="Size.Large" 
                                 Class="mr-3" />
                        <MudText Typo="Typo.h6">
                            Confirm Delete Deposit
                        </MudText>
                    </div>
                </MudItem>
                
                <MudItem xs="12">
                    <MudAlert Severity="Severity.Warning">
                        <MudText>Are you sure you want to delete this deposit? This action cannot be undone.</MudText>
                    </MudAlert>
                </MudItem>
                
                <MudItem xs="12">
                    <MudPaper Class="pa-4" Elevation="1">
                        <MudText Typo="Typo.subtitle1" Class="mb-2">
                            <strong>Deposit Details:</strong>
                        </MudText>
                        <MudGrid>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">Amount:</MudText>
                                <MudText Typo="Typo.body1" Color="Color.Success">
                                    <strong>à¸¿@DepositToDelete.Amount.ToString("N2")</strong>
                                </MudText>
                            </MudItem>
                            <MudItem xs="6">
                                <MudText Typo="Typo.body2" Color="Color.Secondary">Date:</MudText>
                                <MudText Typo="Typo.body1">@DepositToDelete.Date.ToString("dd/MM/yyyy")</MudText>
                            </MudItem>
                            @if (!string.IsNullOrEmpty(DepositToDelete.Remark))
                            {
                                <MudItem xs="12">
                                    <MudText Typo="Typo.body2" Color="Color.Secondary">Remark:</MudText>
                                    <MudText Typo="Typo.body1">@DepositToDelete.Remark</MudText>
                                </MudItem>
                            }
                        </MudGrid>
                    </MudPaper>
                </MudItem>
            </MudGrid>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" 
                   Variant="Variant.Text">
            Cancel
        </MudButton>
        <MudButton Color="Color.Error" 
                   Variant="Variant.Filled" 
                   OnClick="Confirm"
                   StartIcon="Icons.Material.Filled.Delete">
            Delete Deposit
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter] public Deposit DepositToDelete { get; set; } = new Deposit(Guid.Empty, Guid.Empty, 0, DateTime.Today, null);

    void Cancel() => MudDialog.Cancel();

    void Confirm() => MudDialog.Close(DialogResult.Ok(true));
}